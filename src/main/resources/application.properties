spring.application.name=playground
spring.datasource.url=jdbc:h2:file:./data/playground_db
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.h2.console.enabled=true
spring.jpa.hibernate.ddl-auto=update

# ==============================================================================
# Resilience4j Circuit Breaker Configuration for 'backendA'
# ==============================================================================
# Enable health indicator to check state via Actuator (if enabled)
resilience4j.circuitbreaker.instances.backendA.registerHealthIndicator=true
# Size of the sliding window which is used to record the outcome of calls when the CircuitBreaker is closed.
resilience4j.circuitbreaker.instances.backendA.slidingWindowSize=10
# Minimum number of calls which are required (per sliding window period) before the CircuitBreaker can calculate the error rate.
resilience4j.circuitbreaker.instances.backendA.minimumNumberOfCalls=5
# Configures the number of permitted calls when the CircuitBreaker is half open.
resilience4j.circuitbreaker.instances.backendA.permittedNumberOfCallsInHalfOpenState=3
# Enables automatic transition from OPEN to HALF_OPEN state once the waitDurationInOpenState has passed.
resilience4j.circuitbreaker.instances.backendA.automaticTransitionFromOpenToHalfOpenEnabled=true
# The time that the CircuitBreaker should wait before transitioning from open to half-open.
resilience4j.circuitbreaker.instances.backendA.waitDurationInOpenState=5s
# Configures the failure rate threshold in percentage. If the failure rate is equal to or greater than the threshold, the CircuitBreaker transitions to open and starts short-circuiting calls.
resilience4j.circuitbreaker.instances.backendA.failureRateThreshold=50

# ==============================================================================
# Resilience4j Retry Configuration for 'retryApi'
# ==============================================================================
# The maximum number of total attempts (including the initial call and retries).
# e.g., maxAttempts=3 means 1 initial call + 2 retries.
resilience4j.retry.instances.retryApi.maxAttempts=3

# The fixed wait duration between retry attempts.
# If exponential backoff is enabled, this is the initial wait time.
resilience4j.retry.instances.retryApi.waitDuration=500ms

# Enables exponential backoff, meaning the wait time increases exponentially after each attempt.
# e.g., 500ms -> 1000ms -> 2000ms...
resilience4j.retry.instances.retryApi.enableExponentialBackoff=true

# The multiplier for generating the next wait interval.
# wait_interval = waitDuration * (exponentialBackoffMultiplier ^ (attempt - 1))
resilience4j.retry.instances.retryApi.exponentialBackoffMultiplier=2

# Enables randomized wait (jitter) to prevent thundering herd problem.
# This adds a random factor to the wait duration.
resilience4j.retry.instances.retryApi.enableRandomizedWait=true

# The factor used for randomization.
# actual_wait_time = wait_interval +/- (random_factor * wait_interval)
# e.g., with 0.5, the wait time varies by +/- 50%.
resilience4j.retry.instances.retryApi.randomizedWaitFactor=0.5

# ==============================================================================
# Resilience4j Bulkhead Configuration for 'bulkheadApi'
# ==============================================================================
# The maximum number of concurrent calls permitted for this bulkhead.
# If maxConcurrentCalls=1, only one request can be processed at a time.
resilience4j.bulkhead.instances.bulkheadApi.maxConcurrentCalls=1

# The maximum time a thread will wait for permission to execute a call.
# If the bulkhead is full, the thread blocks for this duration.
# If permission is not acquired within this time, a BulkheadFullException is thrown.
resilience4j.bulkhead.instances.bulkheadApi.maxWaitDuration=10ms

# ==============================================================================
# WebClient Timeout Configuration
# ==============================================================================
# The target API for the Timeout pattern demonstration
timeout.target.url=http://localhost:8080/test/timeout/target
# Timeout limit in milliseconds. Any response taking longer than this will trigger a TimeoutException.
# Default is 500 ms for the demonstration. If delay > timeout, it fails; if delay < timeout, it succeeds.
api.call.timeout.ms=500
